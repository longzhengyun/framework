<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Canvas</title>
	<style type="text/css">
		html,body{height:100%;}
		body{margin:0;overflow:hidden;}
		.canvas-wrap{position:relative;height:100%;}
		.canvas{position:absolute;}
	</style>
</head>
<body>
<div id="canvasWrap" class="canvas-wrap"></div>
<script type="text/javascript" src="../src/jary.fw.js"></script>
<script type="text/javascript">
//color数据
jary.define('canvasColor', [], function(){
	return [ 
		[ "#10222B", "#95AB63", "#BDD684", "#E2F0D6", "#F6FFE0" ],
		[ "#362C2A", "#732420", "#BF734C", "#FAD9A0", "#736859" ],
		[ "#0D1114", "#102C2E", "#695F4C", "#EBBC5E", "#FFFBB8" ],
		[ "#2E2F38", "#FFD63E", "#FFB54B", "#E88638", "#8A221C" ],
		[ "#121212", "#E6F2DA", "#C9F24B", "#4D7B85", "#23383D" ],
		[ "#343F40", "#736751", "#F2D7B6", "#BFAC95", "#8C3F3F" ],
		[ "#000000", "#2D2B2A", "#561812", "#B81111", "#FFFFFF" ],
		[ "#333B3A", "#B4BD51", "#543B38", "#61594D", "#B8925A" ]
	];
});

//圆周率
jary.define('constant.PI', [], function(){
	return Math.PI;
});

//canvas工厂
jary.define('canvasFactory', ['canvasColor', 'constant.PI'], function(canvasColor, PI){
	return {
		init: function(wrap){
			//获取颜色值
			var color = canvasColor[Math.floor(canvasColor.length * Math.random())];
				document.body.style.backgroundColor = color[0];
			var _this = this;
				document.body.onclick = function(){
					_this.create(wrap, color);
				};
		},
		create: function(wrap, color){
			var size = Math.floor(100 * Math.random()) + 20,//随机尺寸
				maxWidth = document.body.clientWidth - size,
				maxHeight = document.body.clientHeight - size;
			
			//创建圆
			var circle = document.createElement('canvas');//创建canvas
				circle.className = 'canvas';
				circle.width = circle.height = size;
				circle.style.top = Math.floor(maxHeight * Math.random()) + 'px';
				circle.style.left = Math.floor(maxWidth * Math.random()) + 'px';
			var graphics = circle.getContext('2d');
			var num_circles = Math.ceil(10 * Math.random());
			for (var i = size; i > 0; i -= Math.floor(size / num_circles)) {
				graphics.fillStyle = color[Math.floor(color.length * Math.random())];
				graphics.beginPath();
				graphics.arc(size / 2, size / 2, i / 2, 0, PI * 2);
				graphics.closePath();
				graphics.fill();
			};
				wrap.appendChild(circle);
		}
	}
});

//执行
window.onload = function(){
	var canvasFactory = jary.use('canvasFactory');
	var canvasWrap = document.getElementById('canvasWrap');
		canvasFactory.init(canvasWrap);
};
</script>
</body>
</html>